---
// 共通パーツを読み込む
import Navigation from '../components/Navigation.astro';
---
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>LAST &amp; GABA</title>
    <!-- スマホで幅を正しく認識させる -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      :root {
        --bg: #FAF9F6;
        --text: #333333;
        --accent: #999;
        --font-serif: "YuMincho", "Yu Mincho", serif;
        --font-sans: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN",
          "Hiragino Sans", sans-serif;
      }

      body {
        background-color: var(--bg);
        color: var(--text);
        font-family: var(--font-sans);
        margin: 0;
        padding-top: 80px;
        overflow-x: hidden;
        font-size: 16px; /* ベースフォント */
      }

      /* --- 固定ヘッダー（左に3本線＋ロゴ） --- */
      header.top-bar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 80px;
        background-color: var(--bg);
        display: flex;
        align-items: center;
        justify-content: flex-start;
        padding: 0 40px;
        box-sizing: border-box;
        z-index: 3000;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        gap: 24px;
      }

      .menu-trigger {
        width: 28px;
        height: 18px;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }
      .menu-trigger span {
        display: block;
        width: 100%;
        height: 2px;
        background-color: #333;
        transition: 0.3s;
      }

      .header-logo {
        font-family: var(--font-serif);
        font-size: 1.1rem;
        letter-spacing: 0.4em;
        cursor: pointer;
        color: var(--text);
        text-decoration: none;
        white-space: nowrap;
      }

      /* --- 左から出るオーバーレイメニュー --- */

      .menu-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.35);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.25s ease;
        z-index: 3200;
      }
      .menu-overlay.is-open {
        opacity: 1;
        pointer-events: auto;
      }

      .menu-panel {
        position: absolute;
        top: 0;
        left: 0;
        width: 320px; /* PCデフォルト幅 */
        max-width: 80vw;
        height: 100%;
        background: #111;
        color: #f5f5f5;
        box-sizing: border-box;
        padding: 32px 40px;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }
      .menu-overlay.is-open .menu-panel {
        transform: translateX(0);
      }

      .menu-close {
        font-size: 24px;
        line-height: 1;
        cursor: pointer;
        margin-bottom: 40px;
      }

      .menu-title {
        font-family: var(--font-serif);
        font-size: 1.1rem;
        letter-spacing: 0.4em;
        margin-bottom: 40px;
      }

      .menu-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .menu-item {
        margin-bottom: 16px;
        cursor: pointer;
      }

      /* 行内に番号＋ラベルを横並びで表示 */
      .menu-line {
        display: inline-flex;
        align-items: baseline;
        gap: 0.6em;
        color: inherit;
        text-decoration: none;
      }

  /*これを追加：visited等でも青/紫にさせない */
  .menu-panel a.menu-line,
  .menu-panel a.menu-line:link,
  .menu-panel a.menu-line:visited,
  .menu-panel a.menu-line:hover,
  .menu-panel a.menu-line:active {
    color: inherit;
    text-decoration: none;
  }


      .menu-number {
        font-size: 0.7rem;
        color: var(--accent);
      }
      .menu-label {
        font-size: 0.9rem; /* PC 時 */
        letter-spacing: 0.2em;
      }

      .brand-tree {
        list-style: none;
        padding: 6px 0 0 1.9em; /* 番号＋ラベル位置にそろえる */
        margin: 0;
        display: none;
      }
      .brand-tree.is-open {
        display: block;
      }
      .brand-tree li {
        font-size: 0.85rem; /* PC 時 */
        color: #ccc;
        margin-bottom: 8px;
        letter-spacing: 0.1em;
        cursor: pointer;
      }
      .brand-tree li:hover {
        color: #fff;
      }

      /* --- メインコンテンツ --- */
      main {
        padding: 40px 5vw;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .hero-image {
        width: 100%;
        max-width: 900px;
        aspect-ratio: 3 / 2;
        background: #eee;
        margin-bottom: 40px;
        overflow: hidden;
      }
      .hero-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .description {
        width: 100%;
        max-width: 900px;
        font-family: var(--font-serif);
        line-height: 2.2;
        font-size: 0.95rem;
        color: #444;
        text-align: left;
      }

      .brand-content h2 {
        font-size: 1.4rem;
        font-weight: normal;
        letter-spacing: 0.4em;
        margin-bottom: 50px;
        text-align: center;
      }
      .brand-content h3 {
        font-size: 1rem;
        margin-top: 45px;
        margin-bottom: 15px;
        border-left: 1px solid #333;
        padding-left: 15px;
      }
      .brand-content p {
        margin-bottom: 25px;
        text-align: justify;
      }

      /* ===== スマホ幅でメニュー文字を「やや大きめ」→さらに一段だけ小さく ===== */
      @media (max-width: 768px) {
        header.top-bar {
          padding: 0 20px;
          height: 60px;
          gap: 16px;
        }
        body {
          padding-top: 60px;
        }

        .menu-panel {
          width: 240px;
          padding: 20px 16px;
        }

        .menu-title {
          font-size: 1.1rem;
          letter-spacing: 0.3em;
          margin-bottom: 22px;
        }

        .menu-number {
          font-size: 0.75rem;
        }

        .menu-label {
          font-size: 1.0rem;  /* 1.05 → 1.0 に */
          letter-spacing: 0.2em;
        }

        .brand-tree li {
          font-size: 0.9rem; /* 0.95 → 0.9 に */
        }

        main {
          padding: 28px 16px;
        }
      }
    </style>
  </head>
  <body>
    <header class="top-bar">
      <div class="menu-trigger" id="menuBtn">
        <span></span><span></span><span></span>
      </div>
      <div class="header-logo" id="logo">LAST &amp; GABA</div>
    </header>

    <div class="menu-overlay" id="menuOverlay">
      <div class="menu-panel">
        <div class="menu-close" id="menuClose">×</div>

        <div class="menu-title">LAST &amp; GABA</div>

        <ul class="menu-list">
          <!-- ✅ ELEMENTS: リンク化 -->
          <li class="menu-item">
            <a class="menu-line" href="/elements">
              <span class="menu-number">01</span>
              <span class="menu-label">ELEMENTS</span>
            </a>
          </li>

          <li class="menu-item">
            <span class="menu-line">
              <span class="menu-number">02</span>
              <span class="menu-label">PROGRESS</span>
            </span>
          </li>

          <li class="menu-item">
            <a class="menu-line" href="/essay">
              <span class="menu-number">03</span>
              <span class="menu-label">ESSAY</span>
            </a>
          </li>

          <li class="menu-item">
            <span class="menu-line" id="brandsToggle">
              <span class="menu-number">04</span>
              <span class="menu-label">BRANDS</span>
            </span>
            <ul id="brandList" class="brand-tree">
              <li data-key="comoli">COMOLI</li>
              <li data-key="ssstein">SSSTEIN</li>
              <li data-key="forme">FORME</li>
              <li data-key="manifold">MANIFOLD</li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <main id="mainContent">
      <div class="hero-image">
        <img id="mainImage" src="/hero.jpg" alt="" />
      </div>
      <div class="description" id="textArea">
        形。素材。時間。選別された、生活の構成要素。<br />
        型の描く線と、生地が空気に馴染む様。日々の断片を、静かに記録する。
      </div>
    </main>

    <script is:raw>
      const indexData = {
        img: '/hero.jpg',
        text:
          '形。素材。時間。選別された、生活の構成要素。<br>型の描く線と、生地が空気に馴染む様。日々の断片を、静かに記録する。'
      };

      const data = {
        comoli: {
          img: '/comoli.jpg',
          text:
            '<div class="brand-content"><h2>COMOLI</h2><h3>思想の根幹</h3><p>COMOLIの服を手に取るとき、最初に感じるのは「軽さ」と「違和感」かもしれません。日本の気候と日本人の体型に静かに寄り添う日常着。そのために計算された「余白」こそが、このブランドの真髄であると思うのです。</p></div>'
        },
        ssstein: {
          img: '/ssstein.jpg',
          text:
            '<div class="brand-content"><h2>SSSTEIN</h2><h3>静と動</h3><p>SSSTEINの服を鏡の前で合わせたとき、あのたっぷりとした袖の溜まりや、地面に吸い付くようなパンツの落ち感に驚きます。計算された重なりが「空気の層」を作り出し、静寂としての美しさを成立させています。</p></div>'
        },
        forme: {
          img: '/forme.jpg',
          text:
            '<div class="brand-content"><h2>FORME</h2><h3>歩行を設計する</h3><p>日本人の足特有のボリュームを考慮しながらも、極めてシャープで色気があるライン。木型の完成度が高く、自分の身体の一部を拡張してくれるような、精密なフィッティングを感じさせてくれます。</p></div>'
        },
        manifold: {
          img: '/manifold.jpg',
          text:
            '<div class="brand-content"><h2>MANIFOLD</h2><h3>圧倒的な強さ</h3><p>「構造と、その変化」を掲げるこのブランド。緻密に計算された設計と、選び抜かれた革。使い始めの硬さを、自分の手に馴染ませていく「調教」の時間は、このブランド特有の醍醐味です。</p></div>'
        }
      };

      function showIndex() {
        document.getElementById('mainImage').src = indexData.img;
        document.getElementById('textArea').innerHTML = indexData.text;
        window.scrollTo(0, 0);
      }

      function showContent(key) {
        document.getElementById('mainImage').src = data[key].img;
        document.getElementById('textArea').innerHTML = data[key].text;
        window.scrollTo(0, 0);
      }

      document.addEventListener('DOMContentLoaded', () => {
        const menuBtn = document.getElementById('menuBtn');
        const menuOverlay = document.getElementById('menuOverlay');
        const menuClose = document.getElementById('menuClose');
        const logo = document.getElementById('logo');
        const brandsToggle = document.getElementById('brandsToggle');
        const brandList = document.getElementById('brandList');

        const openMenu = () => {
          menuOverlay.classList.add('is-open');
        };
        const closeMenu = () => {
          menuOverlay.classList.remove('is-open');
        };

        menuBtn.addEventListener('click', openMenu);
        menuClose.addEventListener('click', closeMenu);

        menuOverlay.addEventListener('click', (e) => {
          if (e.target === menuOverlay) closeMenu();
        });

        logo.addEventListener('click', () => {
          showIndex();
          closeMenu();
        });

        brandsToggle.addEventListener('click', () => {
          brandList.classList.toggle('is-open');
        });

        document.querySelectorAll('#brandList li').forEach((li) => {
          li.addEventListener('click', () => {
            const key = li.getAttribute('data-key');
            showContent(key);
            closeMenu();
          });
        });

        // ✅ 任意：メニュー内リンクを押したらメニューを閉じる（体感改善）
        document.querySelectorAll('.menu-panel a[href]').forEach((a) => {
          a.addEventListener('click', () => closeMenu());
        });
      });
    </script>
  </body>
</html>